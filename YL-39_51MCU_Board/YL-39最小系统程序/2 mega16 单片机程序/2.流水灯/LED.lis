                        .module LED.c
                        .area text(rom, con, rel)
 0000                   .dbfile E:\制版成功\YL-60\YL-60A~2\4.相关例程\2.流水灯\LED.c
 0000                   .dbfunc e delayms _delayms fV
 0000           ;              i -> R16,R17
 0000           ;              j -> R18,R19
                        .even
 0000           _delayms::
 0000                   .dbline -1
 0000                   .dbline 19
 0000           ; /******************************************************************************/
 0000           ; /*【编写时间】： 2011.07.07
 0000           ; * 【作    者】： 雁翎电子
 0000           ; * 【版    本】： V1.0
 0000           ; * 【网    站】： http://ylelectronic.taobao.com/ 
 0000           ; * 【Q      Q】： 348439350
 0000           ; * 【编译环境】： ICCAVR  
 0000           ; * 【函数功能】： 流水灯实验
 0000           ; * 【晶    振】:  8M           
 0000           ; * 【芯    片】:  ATMEGA16A     
 0000           ; * 【硬件连接】： J1短路帽接上  
 0000           ; /******************************************************************************/  
 0000           ;        #define  uchar  unsigned char
 0000           ;          #define  uint   unsigned int
 0000           ;        #include <iom16v.h>
 0000           ;        #include <macros.h>
 0000           ;          
 0000           ;        void delayms(void)      // 延时子程序       
 0000           ;         {                                             
 0000                   .dbline 21
 0000           ;                unsigned int i,j;
 0000           ;                        for(i=0;i<100;i++)
 0000 0027              clr R16
 0002 1127              clr R17
 0004 0BC0              xjmp L5
 0006           L2:
 0006                   .dbline 22
 0006 2227              clr R18
 0008 3327              clr R19
 000A 02C0              xjmp L9
 000C           L6:
 000C                   .dbline 22
 000C           L7:
 000C                   .dbline 22
 000C 2F5F              subi R18,255  ; offset = 1
 000E 3F4F              sbci R19,255
 0010           L9:
 0010                   .dbline 22
 0010 283B              cpi R18,184
 0012 EBE0              ldi R30,11
 0014 3E07              cpc R19,R30
 0016 D0F3              brlo L6
 0018           L3:
 0018                   .dbline 21
 0018 0F5F              subi R16,255  ; offset = 1
 001A 1F4F              sbci R17,255
 001C           L5:
 001C                   .dbline 21
 001C 0436              cpi R16,100
 001E E0E0              ldi R30,0
 0020 1E07              cpc R17,R30
 0022 88F3              brlo L2
 0024                   .dbline -2
 0024           L1:
 0024                   .dbline 0 ; func end
 0024 0895              ret
 0026                   .dbsym r i 16 i
 0026                   .dbsym r j 18 i
 0026                   .dbend
 0026                   .dbfunc e main _main fV
 0026           ;              j -> R20
 0026           ;              i -> R22
                        .even
 0026           _main::
 0026                   .dbline -1
 0026                   .dbline 25
 0026           ;                           for(j=0;j<3000;j++);
 0026           ;         } 
 0026           ;         void  main(void)
 0026           ;         {
 0026                   .dbline 27
 0026           ;                uchar  i,j;            //定义变量
 0026           ;          PORTD=0xFF;                  //设为输出口
 0026 8FEF              ldi R24,255
 0028 82BB              out 0x12,R24
 002A                   .dbline 28
 002A           ;          DDRD=0xFF;                           //PD口设为输出高电平，灯灭
 002A 81BB              out 0x11,R24
 002C 0BC0              xjmp L12
 002E           L11:
 002E                   .dbline 30
 002E           ;          while(1)
 002E           ;             {
 002E                   .dbline 31
 002E           ;               i=1;
 002E 61E0              ldi R22,1
 0030                   .dbline 32
 0030           ;               for (j=0;j<8;j++)  //循环8次，即PD0~~PF7轮流闪亮  
 0030 4427              clr R20
 0032 06C0              xjmp L17
 0034           L14:
 0034                   .dbline 33
 0034                   .dbline 34
 0034 262E              mov R2,R22
 0036 2094              com R2
 0038 22BA              out 0x12,R2
 003A                   .dbline 35
 003A E2DF              xcall _delayms
 003C                   .dbline 36
 003C 660F              lsl R22
 003E                   .dbline 37
 003E           L15:
 003E                   .dbline 32
 003E 4395              inc R20
 0040           L17:
 0040                   .dbline 32
 0040 4830              cpi R20,8
 0042 C0F3              brlo L14
 0044                   .dbline 39
 0044           L12:
 0044                   .dbline 29
 0044 F4CF              xjmp L11
 0046           X0:
 0046                   .dbline -2
 0046           L10:
 0046                   .dbline 0 ; func end
 0046 0895              ret
 0048                   .dbsym r j 20 c
 0048                   .dbsym r i 22 c
 0048                   .dbend
